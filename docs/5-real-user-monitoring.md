# Real User Monitoring
--8<-- "snippets/send-bizevent/5-real-user-monitoring.js"

Dynatrace Real User Monitoring (RUM) gives you the power to know your customers by providing performance analysis in real time. This includes all user actions taken and how the various actions impact performance. You can also easily identify problems or errors that occurred as well as user experience ratings, geolocation breakdowns, and much more. You can also gain insight into the behavior of your users. This among others includes the number of customers who return to your site. With Dynatrace RUM, you have the context over time and immediate analysis to the complete picture of your end-user experience.

<div class="grid cards" markdown>
- [Learn More:octicons-arrow-right-24:](https://docs.dynatrace.com/docs/shortlink/rum-overview){target=_blank}
</div>

## Web Application Detection

After OneAgent in full-stack monitoring mode is installed on a host, it monitors all applications running on that host. As a starting point, all monitoring data is encapsulated in a placeholder application called `My web application`. We offer this placeholder application to allow for more flexibility — it's you who decides how to organize your applications.  In Real User Monitoring, monitored applications are logical constructs onto which customer applications—websites, mobile apps, and more are mapped for monitoring with regard to traffic from real users.

### Suggested Approach

The `My web application` placeholder application aggregates the traffic from all detected domains. This application can serve as your starting point for mapping the identified domains to separate applications in your environment.

Create a new application by transferring the detected AstroShop domain within `My web application` to a new application.

In your Dynatrace tenant, launch the `Frontend` app.  Locate the application `My web application` and click to view it.

![Frontend App](./img/rum-app_detection_open_frontend_app.png)

Scroll down to find the section **Top 3 Domains**

![Top 3 Domains](./img/rum-app_detection_top_3_domains.png)

Create new application.

![Create New Application](./img/rum-app_detection_domain_create_new_app.png)

Confirm creation.

![Confirm New Application](./img/rum-app_detection_domain_create_new_app_confirm.png)

View top 3 domains again.

![Top 3 Domains with New App](./img/rum-app_detection_new_app_transfer.png)

View new app.

![View New App](./img/rum-app_detection_new_app_with_traffic.png)

TODO: Summarize

### Detection Rules Approach

If you want to create more applications, change existing application mappings, or if you need to define more complex rules based not only on domains but also on URLs, you can use the Application detection settings page.

The URLs used for application detection have the `scheme://host:port/path?query` structure, where the query string is optional and default ports 80 for HTTP and 443 for HTTPS are omitted. The URL does not include a possible fragment identifier as in `scheme://host:port/path?query#fragment`, since application detection rules are evaluated on the server side of the application and the fragment identifier is only used by the browser and not added to web requests.

AstroShop traffic generated by load generator process accesses the application via the `astroshop-frontendproxy` domain.  When you access the application in your browser, the domain will be different.  Add the additional domain to the web application detection rules.

Start by navigating to the **Ports** tab of your Codespaces instance.  Locate port **30100**.  Right click on `Visibility: Private`, click `Port Visibility`, and click `Public`.  This will expose the port publicly by allowing browsers without session data to access it.

![Port Visibility](./img/rum-app_detection_codespaces_ports_public_visibility.png)

Browse to the AstroShop application on port 30100 in a new incognito window.

![Open AstroShop](./img/rum-app_detection_codespaces_ports_open_in_browser.png)

Confirm going to the site

![Continue](./img/rum-app_detection_codespaces_open_incognito.png)

Validate you can access the app

![AstroShop](./img/rum-app_detection_browse_complete_order.png)

Copy the URL

In your Dynatrace tenant, launch the `Settings` app.  

![Settings Detection Rules](./img/rum-app_detection_settings_app_detection.png)

View rules.  Create rule.

![Rules](./img/rum-app_detection_settings_detection_rules.png)

New Rule

![Rule List](./img/rum-app_detection_settings_new_detection_rule.png)

![Place Orders](./img/rum-app_detection_browse_complete_order.png)

View app

![AstroShop Detection Rules](./img/rum-app_detection_astroshop_detection_rules.png)

Detected domains

![AstroShop Detected Domains](./img/rum-app_detection_astroshop_detected_domains.png)

TODO: summary

## Configure Web Application

### Application Name

Edit the Application Settings.

![Edit Application Settings](./img/rum-configure_app_astroshop_edit.png)

tip: edit application settings

![Edit Application Settings](./img/rum-configure_app_edit_application_settings.png)

Change the name.

![Change Name](./img/rum-configure_app_astroshop_change_name.png)

### User Tag

Browse the application interface.  Scroll to the bottom and find the Session Id.

![Session Id](./img/rum-configure_app_browse_find_sessionid.png)

Select the Session Id, right click, and choose **Inspect**.

![Inspect CSS Selector](./img/rum-configure_app_dev_tools_css_selector.png)

Console

![Console CSS Selector](./img/rum-configure_app_dev_tools_console.png)

User tags

![User Tags](./img/rum-configure_app_settings_user_tag.png)

Add user tag rule

![Add User Tag](./img/rum-configure_app_settings_add_user_tag_rule.png)

Save user tag rule

![Save User Tag](./img/rum-configure_app_settings_save_user_tag_rule.png)

Data Privacy Setting

![Data Privacy Do Not Track](./img/rum-configure_app_settings_data_privacy_do_not_track.png)

View User Sessions

![Analyze User Sessions](./img/rum-configure_app_view_user_sessions.png)

User Sessions

![AstroShop User Sessions](./img/rum-configure_app_user_sessions_astroshop.png)

Filter on User Tag

![Filter User Tag](./img/rum-configure_app_user_sessions_filter_user_tag.png)

User Sessions for User Tag

![User Sessions for User Tag](./img/rum-configure_app_user_sessions_for_user_tag.png)

TODO: Summary

### User Actions

Edit the application settings.  Enable XHR detection.

[Enable XHR Detection](./img/rum-configure_app_enable_xhr_detection.png)

tip: allow time for new data if it was disabled

View application.  analyze user actions.

[Analyze User Actions](./img/rum-configure_app_analyze_user_actions.png)

Switch to Load Actions

[Load Actions](./img/rum-configure_app_analyze_load_user_actions.png)

View the top 100 load actions

[Top 100 Load Actions](./img/rum-configure_app_analyze_top_100_load_actions.png)

Switch to XHR Actions

[XHR Actions](./img/rum-configure_app_analyze_xhr_user_actions.png)

View the top 100 xhr actions

[Top 100 XHR Actions](./img/rum-configure_app_analyze_top_100_xhr_actions.png)

Placeholders

[Placeholders](./img/rum-configure_app_settings_placeholders.png)

Xhr Url Path

[XhrUrlPath](./img/rum-configure_app_settings_placeholder_xhrurlpath.png)

Split actions by domain

[Split Actions by Domain](./img/rum-configure_app_settings_split_actions_by_domain.png)

Add Load Action Naming Rule

[Load Action Naming Rule](./img/rum-configure_app_settings_add_naming_rule_load_actions.png)

Product page naming rule

[Product Page Naming Rule](./img/rum-configure_app_settings_product_page_naming_rule.png)

Checkout page naming rule

[Checkout Page Naming Rule](./img/rum-configure_app_settings_checkout_page_naming_rule.png)

Add XHR Action Naming Rule

[XHR Naming Rules](./img/rum-configure_app_settings_add_naming_rule_xhr_actions.png)

XHR with element identifier

[XHR with ElementIdentifier](./img/rum-configure_app_settings_xhr_with_element_identifier.png)

XHR with XhrUrlPath

[XHR with XhrUrlPath](./img/rum-configure_app_settings_xhr_with_xhrurlpath.png)

XHR rule priority

[XHR Rule Priority](./img/rum-configure_app_settings_xhr_priority.png)

XHR actions with Next

[XHR Next Actions](./img/rum-configure_app_settings_xhr_next_actions.png)

XHR Exclusions

[XHR Exclusions](./img/rum-configure_app_settings_xhr_exclusion_rules.png)

Add exclusion rule

[XHR Exclusion Rule](./img/rum-configure_app_settings_xhr_exclusion_next.png)

Wait some time.  View new user action list.

[New Top 100 Actions](./img/rum-configure_app_new_top_100_user_actions.png)

TODO: summary

## Continue

In the next section, we'll query, view, and analyze logs ingested into Dynatrace.

<div class="grid cards" markdown>
- [Continue to analyzing logs in Dynatrace:octicons-arrow-right-24:](6-analyze-logs.md)
</div>